<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0, user-scalable=no">
		<title>选课</title>
		<link rel="stylesheet" type="text/css" href="../../assets/css/reset.css" />
		<link rel="stylesheet" type="text/css" href="../../assets/css/TY.css" />
		<link rel="stylesheet" type="text/css" href="study.css" />
		<script src="../../assets/js/rem.js" type="text/javascript" charset="utf-8"></script>
	</head>

	<body>

		<div class="TYsection2">
			<div class="selection">
				<div class="selection_item">
					<a href="study.html">
						<div class="selection_itemImg">
							<img src="../../assets/img/home/xuanke.png"/>
						</div>
						<div class="selection_itemFrame">
							<div class="selection_itemFrame_title">
								<span>需求分析发现过程概述1</span>
							</div>
							<div class="selection_itemFrame_text">
								<span>Volere需求发现过程6：需求复查和迭代增量过程增量过程增量过程</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>授课老师：</span><span>Sasa</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>困难程度：</span><span>容易</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>更新课程：</span><span>129节</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>课程学习时间：</span><span>2015/7/29-2015/8/1</span>
							</div>
						</div>
					</a>
					
				</div>
				<div class="selection_item">
					<a href="study.html">
						<div class="selection_itemImg">
							<img src="../../assets/img/home/xuanke.png"/>
						</div>
						<div class="selection_itemFrame">
							<div class="selection_itemFrame_title">
								<span>需求分析发现过程概述1</span>
							</div>
							<div class="selection_itemFrame_text">
								<span>Volere需求发现过程6：需求复查和迭代增量过程增量过程增量过程</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>授课老师：</span><span>Sasa</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>困难程度：</span><span>容易</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>更新课程：</span><span>129节</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>课程学习时间：</span><span>2015/7/29-2015/8/1</span>
							</div>
						</div>
					</a>
					
				</div>
				<div class="selection_item">
					<a href="study.html">
						<div class="selection_itemImg">
							<img src="../../assets/img/home/xuanke.png"/>
						</div>
						<div class="selection_itemFrame">
							<div class="selection_itemFrame_title">
								<span>需求分析发现过程概述1</span>
							</div>
							<div class="selection_itemFrame_text">
								<span>Volere需求发现过程6：需求复查和迭代增量过程增量过程增量过程</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>授课老师：</span><span>Sasa</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>困难程度：</span><span>容易</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>更新课程：</span><span>129节</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>课程学习时间：</span><span>2015/7/29-2015/8/1</span>
							</div>
						</div>
					</a>
					
				</div>
				<div class="selection_item">
					<a href="study.html">
						<div class="selection_itemImg">
							<img src="../../assets/img/home/xuanke.png"/>
						</div>
						<div class="selection_itemFrame">
							<div class="selection_itemFrame_title">
								<span>需求分析发现过程概述1</span>
							</div>
							<div class="selection_itemFrame_text">
								<span>Volere需求发现过程6：需求复查和迭代增量过程增量过程增量过程</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>授课老师：</span><span>Sasa</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>困难程度：</span><span>容易</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>更新课程：</span><span>129节</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>课程学习时间：</span><span>2015/7/29-2015/8/1</span>
							</div>
						</div>
					</a>
					
				</div>
				<div class="selection_item">
					<a href="study.html">
						<div class="selection_itemImg">
							<img src="../../assets/img/home/xuanke.png"/>
						</div>
						<div class="selection_itemFrame">
							<div class="selection_itemFrame_title">
								<span>需求分析发现过程概述1</span>
							</div>
							<div class="selection_itemFrame_text">
								<span>Volere需求发现过程6：需求复查和迭代增量过程增量过程增量过程</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>授课老师：</span><span>Sasa</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>困难程度：</span><span>容易</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>更新课程：</span><span>129节</span>
							</div>
							<div class="selection_itemFrame_text1">
								<span>课程学习时间：</span><span>2015/7/29-2015/8/1</span>
							</div>
						</div>
					</a>
					
				</div>
				
				
			</div>
		</div>

		<div class="TYfooter">
			<div>
				<a href="../home/index.html">
					<div>
						<img src="../../assets/img/home/home_up.png" />
						<img src="../../assets/img/home/home_down.png" />
					</div>
					<div>首页</div>
				</a>
			</div>
			<div>
				<a href="../buy/buy.html">
					<div>
						<img src="../../assets/img/home/shopping_up.png" />
						<img src="../../assets/img/home/shopping_down.png" />
					</div>
					<div>购课</div>
				</a>
			</div>
			<div class="active">
				<a href="CourseSelection.html">
					<div>
						<img src="../../assets/img/home/learn_up.png" />
						<img src="../../assets/img/home/learn_down.png" />
					</div>
					<div>学习</div>
				</a>
			</div>
			<div>
				<a href="../my/my.html">
					<div>
						<img src="../../assets/img/home/my_up.png" />
						<img src="../../assets/img/home/my_down.png" />
					</div>
					<div>我的</div>
				</a>
			</div>
		</div>
	</body>
	<!--阻止ios滚动条回弹出现空白-->
	<script src="../../assets/js/iosHT.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		overscroll(document.querySelector('.TYsection2'))
		var itemIndex = 0,
			move = document.querySelectorAll('.selection_item')
			moveUl = move[0],
			moveNext = "",
			moveNext2 = "",
			start = 0,
			startY = 0,
			tform = 0,
			tformY = 0,
			width = document.body.offsetWidth;
		for(let i = 0; i < move.length; i++) {
			if(i == 0) {

			} else if(i == 1) {
				move[i].classList.add("last1");
			} else if(i == 2) {
				move[i].classList.add("last2");
			} else {
				move[i].classList.add("last3");
			}
		}
		
		//判断是否登录  没有登录跳转到登录页
		if(localStorage.getItem("userId") == null || localStorage.getItem("userID") == ""){
			window.location.href="../login/login.html";
		}

		function handlerTouchEvent(event) {
			//只跟踪一次触摸
			if(event.touches.length == 1 || event.touches.length == 0) {
				switch(event.type) {
					case "touchstart":
						start = event.touches[0].clientX;
						startY = event.touches[0].clientY;
						tform = 0;
						break;
					case "touchend":
						if(width / 2 > Math.abs(tform)) {
							moveUl.style.transform = "scale(1)";
						} else {
							moveUl.style.transform = ""
							moveUl.classList.add("last3");
							console.log(moveUl)
							itemIndex++;
							//移动最后一张时，重置
							if(itemIndex >= move.length) {
								itemIndex = 0;
								moveUl = document.querySelectorAll('.selection_item')[itemIndex];
								for(let i = 0; i < move.length; i++) {
									move[i].className = "";
								}
								for(let i = 0; i < move.length; i++) {
									move[i].classList.add("selection_item");
									if(i == 0) {

									} else if(i == 1) {
										move[i].classList.add("last1");
									} else if(i == 2) {
										move[i].classList.add("last2");
									} else {
										move[i].classList.add("last3");
									}
								}
							//正常情况下执行
							}else {
								
								moveUl = document.querySelectorAll('.selection_item')[itemIndex];
								moveNext = document.querySelectorAll('.selection_item')[itemIndex + 1];
								moveNext2 = document.querySelectorAll('.selection_item')[itemIndex + 2];
								moveUl.className = "selection_item";
								//判断当总数大于3时执行这个方法
								if(move.length > 3){
									if(itemIndex + 2 >= move.length){
										
										document.querySelectorAll('.selection_item')[0].className = "selection_item last2";
									}else{
										moveNext2.className = "selection_item last2";
									}
									if(itemIndex + 1 >= move.length){
										document.querySelectorAll('.selection_item')[0].className = "selection_item last1";
										document.querySelectorAll('.selection_item')[1].className = "selection_item last2";
									}else{
										moveNext.className = "selection_item last1";
									}
									
									//判断当总数等于3时执行这个方法
								}else if(move.length == 3){
									//总数为3的情况下移动第二张时
									if(itemIndex == 1){
										document.querySelectorAll('.selection_item')[0].className = "selection_item last2";
										document.querySelectorAll('.selection_item')[2].className = "selection_item last1";
									}
									//总数为3的情况下移动第三张时
									if(itemIndex == 2){
										document.querySelectorAll('.selection_item')[0].className = "selection_item last1";
										document.querySelectorAll('.selection_item')[1].className = "selection_item last2";
									}
								}else{
									if(itemIndex == 1){
										document.querySelectorAll('.selection_item')[0].className = "selection_item last1";
									}
								}
								
							}

							moveUl.addEventListener('touchstart', handlerTouchEvent, false);
							moveUl.addEventListener('touchmove', handlerTouchEvent, false);
							moveUl.addEventListener('touchend', handlerTouchEvent, false);

						}
						break;
					case "touchmove":
						event.preventDefault(); //阻止滚动
						tform = -(start - event.changedTouches[0].clientX);
						tformY = -(startY - event.changedTouches[0].clientY);
						moveUl.style.transform = 'translateX(' + tform + 'px)' + 'translateY(' + tformY + 'px)' + 'rotate(' + (tform - tformY) / 20 + 'deg)';

				}
			}
		}

		moveUl.addEventListener('touchstart', handlerTouchEvent, false);
		moveUl.addEventListener('touchmove', handlerTouchEvent, false);
		moveUl.addEventListener('touchend', handlerTouchEvent, false);
	</script>

</html>