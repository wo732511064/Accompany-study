<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0, user-scalable=no">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../assets/css/reset.css" />
		<link rel="stylesheet" type="text/css" href="../../assets/css/TY.css" />
		<link rel="stylesheet" type="text/css" href="home.css" />
		<script src="../../assets/js/rem.js" type="text/javascript" charset="utf-8"></script>
	</head>

	<body>
		<!--分类展开-->
		<div class="datum_popur">
			<div class="datum_popurNone" onclick="Popur()"></div>
			<div class="datum_fl">
				<div class="datum_fl_Top">
					<div class="datum_flFrame">
						<div class="datum_flFrame_header">
							<span>产品资料</span>
							<img src="../../assets/img/home/jt.png" />
						</div>
						<div class="datum_flFrame_item clearfix">
							<div class="active"><span>Axure教程</span></div>
							<div><span>交互设计</span></div>
							<div><span>产品咨询</span></div>
							<div><span>产品设计</span></div>
							<div><span>产品运营</span></div>
							<div><span>产品面试</span></div>
							<div><span>资料下载</span></div>
							<div><span>电商产品</span></div>
							<div><span>金融产品</span></div>
						</div>
					</div>
					<div class="datum_flFrame">
						<div class="datum_flFrame_header">
							<span>行业资料</span>
							<img src="../../assets/img/home/jt.png" />
						</div>
						<div class="datum_flFrame_item clearfix">
							<div><span>硬件科技</span></div>
							<div><span>陪学读书会</span></div>
							<div><span>其他报告</span></div>
							<div><span>休闲娱乐</span></div>
							<div><span>人工智能</span></div>
							<div><span>生活服务</span></div>
							<div><span>新零售</span></div>
							<div><span>疑难问答</span></div>
							<div><span>互联网</span></div>
							<div><span>健康行业</span></div>
							<div><span>旅游地产</span></div>
							<div><span>教育行业</span></div>
						</div>
					</div>
				</div>
				<div class="datum_fl_bottom">
					<!--点击全部显示所有产品资料-->
					<div class="redBj" onclick="Divall()"><span>全部</span></div>
					<div class="blueBj" onclick="Popur()"><span>确定</span></div>
				</div>
			</div>
		</div>

		<div class="TYheader">
			<div class="TYheader_left">
				<a href="index.html">
					<img src="../../assets/img/home/back.png" />
				</a>
			</div>
			<div class="TYheader_center">
				<span>
					产品资料
				</span>
			</div>
			<div class="TYheader_right" onclick="Popur()">
				<img src="../../assets/img/home/class.png" />
			</div>
		</div>
		<div class="TYsection1">
			<div class="index_bottom">
				<div class="index_bottomFrmae">
					<div class="index_CenterLeft">
						<div class="index_CenterLeft_item clearfix">
							<a href="datumContent.html">
								<div class="index_CenterLeft_itemImg">
									<img src="../../assets/img/home/centerIMG.png" />
								</div>
								<div class="index_CenterLeft_itemRight">
									<div class="index_CenterLeft_itemTitle">

										<div>互联网消费金融研究报告</div>
									</div>
									<div class="index_CenterLeft_itemTitle_bq">金融产品</div>
									<div class="index_CenterLeft_itemBottom">

										<div class="index_CenterLeft_itemBottomRight">
											<div class="fl"><span>2018-12-24</span></div>
											<div class="fr">
												<div>
													<img src="../../assets/img/home/chakan.png" />
													<span>124</span>
												</div>
												<div>
													<img src="../../assets/img/home/pinglun.png" />
													<span>12</span>
												</div>
												<div>
													<img src="../../assets/img/home/dianzan.png" />
													<span>123</span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			var dheader = document.querySelectorAll(".datum_flFrame_header");
			var popur = document.querySelector(".datum_popur");
			var item = document.querySelectorAll(".datum_flFrame_item");
			var itemDiv = document.querySelectorAll(".datum_flFrame_item div");
			var clientWidth = document.documentElement.clientWidth;
			window.onload = function() {
				//头部展开事件
				for(let i = 0; i < dheader.length; i++) {
					if(parseInt(item[i].scrollHeight) <= parseInt(3.24 * 100 * (clientWidth / 750))) {
						dheader[i].lastElementChild.style.display = "none";
					} else {
						dheader[i].addEventListener("click", function() {
							dheader[i].parentNode.classList.toggle("active");
						})
					}
				}
			}

			//右侧弹窗事件
			function Popur() {
				popur.classList.toggle("active");
				//清除style
				popur.removeAttribute("style");
			}

			function Divall() {
				popur.classList.toggle("active");
				for(let j = 0; j < itemDiv.length; j++) {
					if(itemDiv[j].classList.contains("active")) {
						itemDiv[j].classList.remove("active")
					}
				}
				//清除style
				popur.removeAttribute("style");
			}

			for(let i = 0; i < itemDiv.length; i++) {
				itemDiv[i].addEventListener("click", function() {
					for(let j = 0; j < itemDiv.length; j++) {
						if(itemDiv[j].classList.contains("active")) {
							itemDiv[j].classList.remove("active")
						}
						itemDiv[i].classList.add("active")
					}
				})
			}

			//	触摸事件
			var moveUl = document.querySelector(".datum_fl"),
				start = 0,
				startY = 0,
				tform = 0,
				tformY = 0,
				frameWidth = 0;

			function handlerTouchEvent(event) {
				//只跟踪一次触摸
				if(event.touches.length == 1 || event.touches.length == 0) {

					switch(event.type) {
						case "touchstart":
							tform = 0;
							start = event.touches[0].clientX;
							startY = event.touches[0].clientY;
							frameWidth = moveUl.offsetWidth;
							popur.style.transition = "all 0s"
							break;
						case "touchend":
							if(tform >= 100) {
//								触摸超过100时关闭
								Popur()
							} else {
//								触摸没有超过100时回到原来位置
								popur.style.transform = "translateX(" + 0 + "px)"
							}

							break;
						case "touchmove":
							var width = document.body.offsetWidth;

							let X = event.touches[0].clientX - start; //x轴的滑动值
							let Y = event.touches[0].clientY - startY; //y轴的滑动值

							if(Math.abs(X) > Math.abs(Y) && X > 0) {
								event.preventDefault();
							} else if(Math.abs(X) > Math.abs(Y) && X < 0) {
								event.preventDefault();
							} else if(Math.abs(Y) > Math.abs(X) && Y > 0) {

							} else if(Math.abs(Y) > Math.abs(X) && Y < 0) {

							} else {
								console.log("just touch");
							}

							tform = -(start - event.changedTouches[0].clientX);
							if(tform <= 0) {
								tform = 0;
							}
							popur.style.transform = "translateX(" + tform + "px)"
					}
				}
			}

			moveUl.addEventListener('touchstart', handlerTouchEvent, false);
			moveUl.addEventListener('touchmove', handlerTouchEvent, false);
			moveUl.addEventListener('touchend', handlerTouchEvent, false);
		</script>
	</body>

</html>